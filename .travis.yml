dist: bionic
language: python
cache: pip
python:
- '3.7'
stages:
- test
- name: pypi
  if: tag IS present
env:
  global:
  - secure: T3rTOQOLkdK0JBpX1QmcCT+PRDgo1FAZurlDTptEFb8r+9K9ab97sBIWi9GmRms9m699ButVeP6Md536DlQ2T+DpjpV1iJW3RKEnKzzJsvl8LjJXyYD7BZnP+p+8AR3y7aPJF8Vw2cUa15wKO0oWUAikjTmbO4QaBv4GESxTNtIQnRe7UX1g+IHfAXoljzPqj03WfsYT4wykt6nB/+wf/kpBW6uh4Y36yscxLZ7v6O2Gphyw/t9dJW5niMDptm0jFk80D41JXwrn3J9rKx9jzEQerqbw0toX6onZvd+S/FCUf0YV8lVKcvcOr8OnwYjsguQ2CxeM1zQEZ07SOa2dJjTxyk8MyyZqWHf8Gge2eDu4BTY+MdfQChPfpLI8ubtKipp2lN04MdQN0r+0qEiBU7z5aVOr7wH9CYLPvf8zzq/yEblhDyLnew9i6wO1aMZ8cJ9vo5J76ohDJp8sNLk6XXtuMGdXVsLPdkA8iseyRi16YbsEkYLzflEe3TKPhqzlF6IZGN76yNn2fWs0iqbrE1Rod20NioafiRSPYYgsDqzX/3iugx2KiETpHWpftmaAqBCTiJgQiCBUEwGlHDCRlmR48ovch8j9ZpF+V5HI2ienCQtzevPhWBvuaBupreWeKgI2YYDUXupgCTWEKsa2AvDv9T/0PvvDwgUmh6c9ews=
  - secure: k9JLTypJP8PNAuysBuvvNng2KkuIFutWC3TFImqdmfoAg5XJ9HMXU9j7JMm8Ha7m3wSy42o/1mBT+9Jn6azC0S+aR9KYibb3yAZwrWmnvKHuwVnmsMfunQAncxaCcqkodlyZybq9YKPZ8pI6wyIqySAJNH2kqlPImiiWG6wsQ+vCpNi1oYNzLnQzMm6KphGnwcRAOb11GdROFcbHqRoG+zp1R7trsP+GLttg8RJd4xU3advaUzh5XCDEET8lxWjzRqSkv+KUiT2FF555V8Z0pfKCE/g9KouK/Po+JeRvH8HzaWmARyEpgjomg5Cxko5WsUFwPtblAsWiNNCWGLm1sr8VRuq3oqp0lrsBf1Spg/aLV5+mEEUPK1L+EjMxqz/XQoS1gsaALim1wmBKPoR/CUfn3cXfRc1o2S3FgItRxIfsMmoCty6UFSJ32N+p6daj3vHCKgHQBfiEKLoQW4vyqYmjDczcocOWbPSS8QGHiNYSZsXmdWso8zHGvIh1T5PglsU/huZSJayjV90iFjS3WLwmDZd6FTJEQn2XpExk8xIARLwWbfJwQcNl2QXz8G7Ji3jkY3TTNHMfgQprQKUUtBMXBPQl1tb4yyljDFf9PwXYayajzYJLloYfYmy8Dcry10Qqg4ry+jybOMFXNrS+M6u7iellkUPwGBtvEU4nrC0=
  - secure: hzHC6GTaFUw81gzei4ypAtw1yZ/OvO1MPYyXHYp55R5SkX/ILo4LyOAIkS8rMCPGrkS/s7fKZDWSSLe820EPzbykXmW2k/yygFebOnkAZEjDRNfbY+NDGUl+MnVDcc65SgxqdmPScBj8FtQuTxbhOOgj1k9Vp2hEVeff5eN41sG4q7rpjVIwbfNGihLENbHX9JJuQOLwOv9/UE5kqpYqxWEyaDOSdlHLZuhW+BrGZzNR0PGF0zHuXIVFBi+VRwZQu4uQMoHtzYCB65x7rs7Mb3Bmi8m64uBWnrafBsfa0r3VMdXviDdtWhkWOmOOhxxraKJsQQVSDdxR9B/eUUK+n5OKCFisuiszpvqtYEEZOGVsFyj3RV/jXSfxwdwaFMUvQ5oOIwLv+3zgDB0QbeA23Y3o0im4cQwbrDHi22YP6cZjZXGJpW6/0eMG4DxknKu3dsZUVTOBDwqQW0KUmO34zhYRBNWZzNOBwHqNZE/wNq4QcahKv+yD/IxNFYz8lxpJZO/K6wfrByr+8AqrwTPTrHtlGEovUvmPi8SnsPZKtbG1KOc+k34tnhULRhb2u1B2psjyCHXsfBOziqizg0JSGKtXlZDF5459FpWRtXqclHZShYo9/OlrOktA50HY3cYyK80dNWMzDQLenZmqJm0ZmM+6mM0qJ6sSuDtk4JJEWcI=
  - secure: AwR3eLXgzhfyRKVedxiR+oKSYkxUOR49FLQImv0A4QE0QGRdMjpeLXgSpbQGYaMpspuohVmRGIzV7W0mCy9vUWHOFWfV4rdth9FvPPcCt3qr30FkZzWIrKPjz95Nxq/NEGXb9tSk1FMmKX5N1jVCrNiweXrOQPPC/2OVuflCHajt59G6OKQz34TbLOLETp3oQg+Gh3Y3inUV85Y0y0jOabLDbSpunN9q2mEFsBUzhwFFMCgO6OFl811mjFol6yfTfjIOSNit+5KjXKcGlpzhRxISNnYCpVOmi58QHyP+H+/pkR73wncDbU/ASTlQlsiF4gni4YFsKU4EQZ+ma82iYkUP1vrz8E+af12/mNYTj1+wG0LghLFjOWzFMHhNxNHjxZdWuuqTmlcVlR3hfABB1+Ep16O9GwIQ2g/ffTerudhTWML5EyycIIDvV4U/fio3GbjMwUdNzFCGydrjaC1cBKAMZ20xgkIk8vokKcHnmcY3qQTMAZw/k9yfdfSLU7kJFG251pJon82WgHc3H9h4BhAq1v6dUfzCo+ySoazWQ95h7fEoKyy8n3bB4RqYxn5eVQcxa1bA0Q1juKwyF2GLf4GFABZGQXOFgDQuCtl0V2zUiYrX4yAQzwocbKO/HQVW51Bz7JDMjLcgZmQj7/UzLO2rKigj5nhFY+NgkjkJZGo=
  - secure: N9Oj8gEufhumt1/tGNbmoVlNIi8g/INLdbPH6WPCOi6H7G9yLds46Vg5lY8foJ5Rz3ztlMMZHwsB56bJJJ7EIVpii/UrciQqb7dU3HUcVQU5UJk2k+ZnrqaCsBQCJff/q6M3CGUcR1DAXDfnafKkiM8I5Jcx4CrNMfFuwnUtlpYkTCG+UTUrnR4lTdpCHAv2rm03KtqUSybNXzF6evSMqBITQAKPk3AUKOPEv7QyS0Dt/pwOdCyVUIkVrjaD1vwKru33V6dY10B8ayDIt1LSzjadbmtYI2wWFPHa3ml6Itp6pYv5/wvxuwwkAFviPHIqZN5EuIwzQzZ39ucl/1VXQSEUB2Kx42PbA0aswGhonQGUJfrhhF53DViq8mwhJoRGeot+mSzosi37JWpsA88b91L25YaP82575jTTXRmahxgGvW8Lm8VHH9OShegFntNK0nOSqrccFZoWqXLZ+NUHBxJ2vDrNGvDE9LKaaZROaj7fu6Sc9drOZwv2BZbWH2tiIICT4xmnI9f4O2N2et/Fu3PGiRjKuhs7D/gFY0kbe/F7Y5bJJdLWu4pXr4WFO30OSt4/d6lswXBGAD6oH0kujue/TA0pQrgoO1j2rdlkBXBWSPrql/lUvUbtGPdHctkQ79vvPu3ug7eqHBNW8nltosPlZZG1yWaPlKP9RtdPpGw=
  - secure: KjBy4DrfS9C/rXmLTxrw5aTZMOr61UQt8hXRuzqQ1rjAWQBkpF7WMoTbHtbMSRNqrdCLotNvS3fEo595FjPsklrG4LrfCCxZ2q4P/KWjfjTJX0OJTPtnFrkVHPgn53pBIf4tDoNFokpVzWCkf3w6HXEdSU1v3GsMAEIt29amPN8qLGltxLAENwtej+TVpAxILkdGGdfu593GxJh/CoztEbOuYlqohGJChbyl6jrviQWR8sakoi0kuvcl8jV6CCw+Prboplu62xCoYrwe+hT85Ht5VRp1WZOBrre8IkjtKbf4bo8ZJRiglwS1jjNc/CQajSqdXgmD+4pYWxPpOAxYpyh8ZcTrwNCyvAzUe/kf9RLFGZ5ObPWdCbj261fUDXQWbJipOCuzopDNiRg3fAcgQ+spmiVcjmAY0PJcjV/gnOPNplasp4KO4nFbiPLQZyfQLcRfUcqcax4FFrgzCEXxNkVuVdrI7RAy01QserQbhFyArBNJ/W7hwV+CGunkojTfgTJIx82GzbAxp/o7NXka8ADEhjWCvst6pjBZmMX+0MvDyzklTEYybovlBiMyIUl7/DosETE5K7iFs5WIz+w+9FHIUu5CDpAG9fqpsUasCmWBXOhG+l4OGCzXWJfohTNwioem99FRvuQ8HxZzFbD83JxCtJp2Hx38s7KKry/zF5c=
  - secure: VEKuPOnqLXFi7EbeT/FHU836CdC1/UOJ0leyA9asoL0s05dI0StoZoyZX2aGefjy2Wb7jxyEJ50oxHEvOcFnP8jcRfBKM9s0yZD1K51Vv96R8AnCPdB8LrvUov90NOuVcYbm/0HU8K26AGD/XFdCnNI71XTaL4PojjshoeuamODylO5ApKXHRtS2GuvA3OuBIGNm5+A6gP7U3mIC622yjqWQIBefQLm9H2IkAX8OyNLvCMBR1N+kvUek59yFSWlmXPLnUuqG/9atNpS11V69OO7hKQVT46gCH9EVhloE/LR747RbaRouZGNuvU3sZ0Ix/luXX1S+burVgAcQ67D6uLjziiopQCUecEcUp//QYkVJZKC1oHQ4jfzAcIamUpQq7v+BNBOwfpMyrcZSLcuK84CL1tc7OqpqFfGU2mklJ6JjDNwMsP/nkRCGAShdCpkJAy8LElo074Iy4TGOdKlsTM/YP8BXFimATuh9NiJ4AS5Wz0Gn/aBY8/gciMZE4KAzWvQ98oJ+yJgasM3gFoqCNblanjGlJYaQ/afIcff2e92dGFQdhaRzG8vmE7XW87uM7t360Edq+poDRJnPwY2KGnaD7JQJlZSSbOu3BPchUrFHSPfLXlW1yxwy6LseOc07h/HKejFzjI+Eb8SxwoJ6+EArd0DgtuCxD4+e35yC4nA=
install:
- pip3 install poetry
- poetry install
jobs:
  fast_finish: true
  include:
  - stage: test
    script:
    - pylint delatore || pylint-exit $? -wfail -efail
    - pytest --cov-report xml --cov delatore
    - codecov
  - stage: pypi
    name: Deploy to PyPi
    script: poetry publish --build -u $PYPI_USERNAME -p $PYPI_PASSWORD
